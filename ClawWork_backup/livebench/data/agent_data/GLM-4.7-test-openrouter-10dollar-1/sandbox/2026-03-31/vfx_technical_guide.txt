[[], ["fps"], [["top_left_x, top_left_y],\n        [top_right_x, top_right_y],\n        [bottom_left_x, bottom_left_y],\n        [bottom_right_x, bottom_right_y]\n    ]\n    \n    # Track points across frames\n    tracked_data = []\n    for i, frame in enumerate(reader):\n        # Calculate optical flow\n        # Update point positions\n        tracked_data.append(current_positions)\n    \n    return tracked_data\n```\n\n\nSTEP 6: PERSPECTIVE TRANSFORMATION\n-----------------------------------\n\nTechnique: Homography Mapping\n- Calculate homography matrix for each frame\n- Map overlay footage onto tracked window position\n- Adjust scale to match window dimensions\n- Apply perspective transformation\n\nEquation:\n[x', y', w']^T = H * [x, y, 1]^T\n\nWhere H is the 3x3 homography matrix\n\n\nSTEP 7: COLOR GRADING\n---------------------\n\nTechnique: Color Matching\n- Sample colors from base clip window area\n- Apply LUT (Look-Up Table) to overlay footage\n- Match exposure, contrast, saturation\n- Apply color temperature adjustment\n\nPython Implementation:\n```python\ndef match_colors(overlay_frame, base_frame, window_mask):\n    # Get average colors from base window area\n    base_colors = base_frame[window_mask]\n    avg_base = np.mean(base_colors, axis=0)\n    \n    # Get average colors from overlay\n    overlay_colors = overlay_frame[alpha_mask]\n    avg_overlay = np.mean(overlay_colors, axis=0)\n    \n    # Calculate color difference\n    color_diff = avg_base - avg_overlay\n    \n    # Apply adjustment to overlay\n    adjusted = overlay_frame + color_diff\n    \n    return adjusted\n```\n\n\nSTEP 8: DISAPPEARANCE EFFECT\n-----------------------------\n\nTiming:\n- At frame 144 (6 second mark), actor disappears\n- Transition from actor to empty window\n\nTechnique Options:\nA. Cross-fade: Gradually dissolve actor opacity\nB. Flash cut: Sudden brightness spike, then cut to empty\nC. Warp dissolve: Pixelated distortion during transition\nD. Energy field: Animated glow effect around actor\n\n\nSTEP 9: FLASH EFFECT\n--------------------\n\nTechnique: White Flash Overlays\n- At disappearance moment, overlay bright white frame\n- Duration: 1-3 frames (0.04-0.12 seconds)\n- Blend mode: Screen or Lighten\n- Follow with brightness decrease (flash decay)\n\nImplementation:\n```python\ndef create_flash_frame(width, height, intensity=1.0):\n    flash = np.ones((height, width, 3)) * intensity * 255\n    return flash.astype(np.uint8)\n```\n\n\nSTEP 10: SMOKE EFFECTS\n----------------------\n\nTechnique: Particle-based Smoke\n- Generate particle system\n- Animate particles emanating from window\n- Apply perlin noise for organic motion\n- Composite with alpha blending\n\nAlternative: Stock Footage\n- Source: Royalty-free stock libraries\n- Examples: Pexels, Pixabay, Videvo\n- Keywords: \"smoke", "mist", "fog", "teleport", "Download and composite into scene\n\nCompositing:\n- Place smoke layer on top of composite\n- Apply track motion to smoke\n- Use blending mode: Screen or Add\n- Adjust opacity for subtle effect\n\n\n3. RENDERING AND OUTPUT\n================================================================================\n\nOutput Specifications:\n- Dimensions: 3840x2160 (matching base clip)\n- Frame Rate: 23.98 fps\n- Codec: H.264 (High profile)\n- Bitrate: High quality (recommended 50+ Mbps)\n- Color Space: Rec.709\n\nQuality Settings:\n- Profile: High\n- Level: 5.1\n- Pixel Format: yuv420p\n- Preset: Medium (balance speed vs quality)\n\n\n4. TROUBLESHOOTING\n================================================================================\n\nIssue: Overlay clip won't open\nSolution 1: File corruption recovery\n  - Try alternative video players\n  - Use ffmpeg to re-encode: ffmpeg -i input.mp4 -c copy output.mp4\n  - Check for incomplete download\n\nSolution 2: Alternative footage\n  - Recreate overlay footage\n  - Use digital manipulation\n  - Procedural generation\n\nIssue: Tracking fails on window\nSolution:\n  - Add tracking markers (artificial features)\n  - Manual keyframing\n  - Use planar tracking algorithms\n  - Reduce tracking area complexity\n\nIssue: Color mismatch\nSolution:\n  - Use color histograms for matching\n  - Apply LUTs for cinematic looks\n  - Adjust individual color channels\n  - Use secondary color correction\n\nIssue: Flash too harsh\nSolution:\n  - Reduce flash intensity\n  - Shorten flash duration\n  - Add color tint to flash\n  - Use gradual fade instead of instant\n\n\n5. ALTERNATIVE APPROACH (CORRUPTED FOOTAGE)\n================================================================================\n\nIf overlay clip is unusable, create effect with base clip only:\n\nTechnique: Digital Erasure\n1. Track window position\n2. Create placeholder content (CGI or stock)\n3. Animate disappearance\n4. Add effects (flash, smoke)\n5. Composite with base clip\n\nBenefits:\n- No dependency on corrupted overlay footage\n- Complete creative control\n- Can be done entirely digitally\n\n\n6. ROYALTY-FREE RESOURCES\n================================================================================\n\nStock Footage Sites:\n- Pexels (https://www.pexels.com)\n- Pixabay (https://pixabay.com)\n- Videvo (https://www.videvo.net)\n- Mixkit (https://mixkit.co)\n- Coverr (https://coverr.co)\n\nSearch Terms:\n- \"smoke effect\"\n- \"fog overlay\"\n- \"teleport effect\"\n- \"energy field\"\n- \"white flash\"\n- \"dissolve transition", "Free Software:\n- Blender (3D/VFX)\n- DaVinci Resolve (color grading)\n- Kdenlive (video editing)\n- OpenShot (video editing)\n\n\n7. FINAL COMPOSITE CHECKLIST\n================================================================================\n\n\u25a1 Footage properly prepared and synchronized\n\u25a1 Motion stabilization applied to overlay\n\u25a1 Mask created with appropriate edge quality\n\u25a1 6+3 second sequence properly stitched\n\u25a1 Camera tracking data calculated\n\u25a1 Perspective transformation applied\n\u25a1 Color grading matches base clip\n\u25a1 Disappearance moment timed correctly\n\u25a1 Flash effect added at transition\n\u25a1 Smoke effects composited\n\u25a1 Final render meets specifications\n\u25a1 Quality control review completed\n\n================================================================================\nEND OF TECHNICAL GUIDE\n================================================================================"]]]